<!DOCTYPE html>
<meta charset="utf-8">

    <style>


        </style>
    <body>


<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

  <!-- address input fields, TODO add google autocomplete example -->
     <table id="address">
      <tr>
        <td class="label">Street address</td>
        <td class="slimField"><input class="field" id="street_number"></input></td>
       <!-- <td class="wideField" colspan="2"><input class="field" id="route"></input></td> -->
      </tr>
      <tr>
        <td class="label">City</td>
        <!-- Note: Selection of address components in this example is typical.
             You may need to adjust it for the locations relevant to your app. See
             https://developers.google.com/maps/documentation/javascript/examples/places-autocomplete-addressform
        -->
        <td class="wideField" colspan="3"><input class="field" id="locality"></input></td>
      </tr>
      <tr>
        <td class="label">State</td>
        <td class="slimField"><input class="field" id="administrative_area_level_1"></input></td>
        <td class="label">Zip code</td>
        <td class="wideField"><input class="field" id="postal_code"></input></td>
      </tr>
    </table>
    <button onClick= getDistricts()>Get Districts</button>

  <div class="wolf-map"></div>


  <script>

/*
https://geocoding.geo.census.gov/geocoder/Geocoding_Services_API.pdf
https://tigerweb.geo.census.gov/ArcGIS/rest/services/TIGERweb/tigerWMS_Current/MapServer

Layers:
115th Congressional Districts (54)
2016 State Legislative Districts - Upper (56)
2016 State Legislative Districts - Lower (58)
*/



function getDistricts(){

	var baseUrl = "https://geocoding.geo.census.gov/geocoder/geographies/address";
	var benchmark = "Public_AR_Current";
	var vintage = "Current_Current";
	var layers = "54,56,58";


	var street = document.getElementById('street_number').value;
	var city = document.getElementById('locality').value;
	var state = document.getElementById('administrative_area_level_1').value;
	var zip = document.getElementById('postal_code').value;
	




	//TEST
	var street = '1661 15th St';
	var city = 'San Francisco';
	var state = 'California';
	var zip = '94103';
	//generates sample_output_census.json

	var query = baseUrl + "?street=" + encodeURIComponent(street) + "&city=" + encodeURIComponent(city) + "&state=" + encodeURIComponent(state) + "&zip=" + zip + "&benchmark=" + benchmark + "&vintage=" + vintage + "&layers=" + encodeURIComponent(layers) + "&format=json";
	console.log(query);

	//if using ajax instead of d3.json 
/*
$.ajax({
  url: baseURl,
  data: {
    street: street,
    city: city,
    state: state,
    zip: zip,
    benchmark: benchmark,
    vintage: vintage,
    layers: layers,
    format: 'jsonp'
  },
  success: function( result ) {
    console.log(result)
    //TODO update map
  }
});
*/

}



//map testing for fixed address

d3.json("/data/sample_output_census.json", function(data) {
  console.log(data);
});

//TODO create topoJSON files

  </script>


  </body>